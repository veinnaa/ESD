<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Accept a payment</title>
		<meta name="description" content="A demo of a payment on Stripe" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<link rel="stylesheet" href="checkout.css" />
		<script src="https://js.stripe.com/v3/"></script>
		<!-- Vue -->
		<script src='https://cdn.jsdelivr.net/npm/vue@3.0.2/dist/vue.global.js'></script>
		<script src="checkout.js" defer></script>
	</head>
	<body>
	<!-- Display a payment form -->
	<form id="payment-form">
		<div v-if="hasBookings">

		</div>
		<div id="payment-element">
			<!--Stripe.js injects the Payment Element-->
		</div>
		<div class="d-flex justify-content-between">
			<p class="mb-2">Total</p>
			<p class="mb-2">{}</p>
		</div>

		<div id = "app" class="d-flex justify-content-between">
			<p class="mb-2">Doctor Name</p>
			<p class="mb-2">{{ doctorID }}</p>
		</div>

		<div class="d-flex justify-content-between">
			<p class="mb-2">Specialization</p>
			<p class="mb-2">Physiology</p>
		</div>

		<button id="submit">
			<div class="spinner hidden" id="spinner"></div>
			<span id="button-text">Pay now</span>
		</button>

		<div id="payment-message" class="hidden"></div>
	</form>
	</body>

  	<script>
		const bookingURL = "http://localhost:5002/booking/1"

		const app = Vue.createApp({
				computed: {
					hasBookings: function () {
						return this.data.booking.length > 0;
					}
				},
				data() {
					return {
						message: "no booking records",
						doctorID: "",

					};
				},
				mounted(){
					const response =
						fetch(bookingURL)
							.then(response => response.json())
							.then(data => {
								console.log(response);
								this.doctorID = data.data['DoctorID'];
								}
							)
							.catch(error => {
								// Errors when calling the service; such as network error, 
								// service offline, etc
								console.log(this.message + error);
							});
				}
				
			}
		);
		const vm = app.mount('#app');
  	</script>
</html>